import { Dispatch, MutableRefObject, ReactElement, ReactNode, SetStateAction } from 'react';
import { DynamicJwt, NameServiceData, ProjectSettings, SdkView } from '@dynamic-labs/sdk-api';
import { GenericNetwork, NetworkConfigurationMap, SocialProviderFilter, WalletUiUtils } from '@dynamic-labs/types';
import { Chain, GetAddressOpts, WalletConnector } from '@dynamic-labs/wallet-connector-core';
import { PasskeySuccessEnum } from '../../../components/PasskeyCreatedSuccessBanner/PasskeyCreatedSuccessBanner';
import { AccessDeniedCustomButton, AccountSwitchState, AuthModeType, AwaitingSignatureState, ChainToWalletMap, DynamicEventsCallbacks, DynamicRPCProviders, MultiWalletWidgetState, RecommendedWallet, UserProfile, Wallet, WalletOption, WalletWithAction } from '../../../shared';
import { SocialNetworkIconType } from '../../../utils/functions/getSocialNetworkIcon';
import { MultiWalletWidgetStateSetter } from '../../../utils/hooks/multiWallet';
import { ConnectWalletOptions } from '../../../utils/hooks/useConnectWallet/useConnectWallet';
import { ThemeData, ThemeSetting } from '../../ThemeContext';
import { DisplayOrder, SetDisplayOrderPriority, SetShowAuthFlow } from '../hooks';
import { SetCallbackType } from '../useCustomerCallbacks';
export type ChainsToConnect = {
    chain: Chain;
    chainId?: number;
};
export type WalletsFilter = (options: WalletOption[]) => WalletOption[];
export type WalletListViewTabItem = {
    label: {
        text?: string;
        icon?: string | ReactElement;
    };
    walletsFilter?: WalletsFilter;
    recommendedWallets?: RecommendedWallet[];
};
export type WalletListViewSettings = {
    type: 'wallet-list';
    tabs?: {
        style?: 'grid';
        items: WalletListViewTabItem[];
    };
};
export type ViewsOverrides = SdkView | WalletListViewSettings;
export type EvmNetworksOverrides = GenericNetwork[] | ((dashboardNetworks: GenericNetwork[]) => GenericNetwork[]);
export type SettingsOverrides = {
    views?: Array<ViewsOverrides>;
    /**
     * Allows overriding which evm networks the SDK has access to.
     * If an array is provided, it is used instead of whatever is obtained from dashboard configs.
     * If a callback is passed, the callback will be called with the values obtained from dashboard, and
     * it must return the network values that will be used.
     *
     * WARNING: this callback must be memoized as it will be used in a dependency array to ensure
     * the SDK can react to this value changing (for ex, toggling a chain off).
     */
    evmNetworks?: EvmNetworksOverrides;
};
export type ConnectWalletResult = {
    address: string;
    id: string;
};
export type NetworkValidationMode = 'always' | 'sign-in' | 'never';
export interface IDynamicContext {
    accessDeniedMessagePrimary?: string;
    accessDeniedMessageSecondary?: string;
    overrides?: SettingsOverrides;
    accessDeniedButton?: AccessDeniedCustomButton;
    accountSwitchState: AccountSwitchState;
    appLogoUrl?: string;
    networkValidationMode: NetworkValidationMode;
    appName?: string;
    isBridgeFlow: boolean;
    authMode: AuthModeType;
    authToken: string | undefined;
    authorizationViewDisplayOrder: DisplayOrder;
    awaitingSignatureState: AwaitingSignatureState;
    clearStatesOnBackClick: () => void;
    connectWallet: (walletConnector: WalletConnector, getAddressOpts?: GetAddressOpts, options?: ConnectWalletOptions) => Promise<ConnectWalletResult | undefined>;
    connectedWallets: Wallet[];
    linkedWallets: Wallet[];
    locale: {
        changeLanguage: (lang: string) => void;
    };
    isFullyConnected: boolean;
    setIsFullyConnected: (value: boolean | ((val: boolean) => boolean)) => void;
    consumeNonce: () => string | undefined;
    cssOverrides?: string | JSX.Element;
    customPrivacyPolicy?: ReactNode;
    customTermsOfServices?: ReactNode;
    debugError: boolean;
    decodedAuthToken: Omit<DynamicJwt, 'jwt'> | undefined;
    decodedOnboardingOnlyToken: Omit<DynamicJwt, 'jwt'> | undefined;
    defaultNumberOfWalletsToShow: number;
    bridgeChains: ChainsToConnect[] | undefined;
    bridgeChainsToConnect: ChainsToConnect[] | undefined;
    setBridgeChainsToConnect: Dispatch<SetStateAction<ChainsToConnect[] | undefined>>;
    desktopUri: string;
    displaySiweStatement: boolean;
    environmentId: string;
    enableConnectOnlyFallback?: boolean;
    eventsCallbacks?: DynamicEventsCallbacks;
    getConnectedWalletById: (walletId: string) => Wallet | undefined;
    getNameService: (address?: string) => Promise<NameServiceData | undefined>;
    handleLogOut: () => Promise<void>;
    handleUnlinkWallet: (walletId: string) => Promise<void> | void;
    isAuthenticated: boolean;
    isProjectSettingsLoading: boolean;
    isSingleWalletAccount: boolean;
    loadingNetwork: boolean;
    loginWithEmail: boolean;
    sendWagmiSettings: (settings: {
        dynamicWagmiSettings?: object;
    }) => void;
    multiWallet: boolean;
    multiWalletWidgetState: MultiWalletWidgetState;
    network: number | string | undefined;
    networkConfigurations: NetworkConfigurationMap | undefined;
    newToWeb3WalletChainMap: ChainToWalletMap;
    notInTheListImageUrl?: string;
    onboardingImageUrl?: string;
    onboardingOnlyJwt: string | undefined;
    policiesConsentInnerComponent?: ReactNode | ReactNode[];
    primaryWallet: Wallet | null;
    primaryWalletId: string | undefined;
    privacyPolicyUrl?: string;
    projectSettings: ProjectSettings | undefined;
    qrcodeUri: string;
    rpcProviders: DynamicRPCProviders;
    sdkHasLoaded: boolean;
    secondaryWallets: Wallet[];
    selectedWalletConnector: WalletConnector | null;
    selectedWalletWithAction: WalletWithAction | null;
    setAuthMode: Dispatch<SetStateAction<AuthModeType>>;
    setAuthorizationViewDisplayOrder: SetDisplayOrderPriority;
    setCallback: SetCallbackType;
    setDesktopUri: Dispatch<SetStateAction<string>>;
    setIsSingleWalletAccount: Dispatch<SetStateAction<boolean>>;
    setLogInWithEmail: Dispatch<SetStateAction<boolean>>;
    setMultiWallet: (value: boolean) => void;
    setMultiWalletWidgetState: MultiWalletWidgetStateSetter;
    setOnboardingOnlyJwt: Dispatch<SetStateAction<string | undefined>>;
    setPrimaryWallet: (walletId: string) => Promise<void>;
    setPrimaryWalletId: (walletId: string) => void;
    setQrcodeUri: Dispatch<SetStateAction<string>>;
    setSelectedWalletConnectorKey: (key: string | null) => void;
    setSelectedWalletWithAction: (walletWithAction: WalletWithAction | null) => void;
    setShowAuthFlow: SetShowAuthFlow;
    setShowDynamicUserProfile: Dispatch<SetStateAction<boolean>>;
    setPasskeySuccessPopup: (key: PasskeySuccessEnum) => void;
    setShowQrcodeModal: Dispatch<SetStateAction<boolean>>;
    setShowWidgetStatePopup: Dispatch<SetStateAction<boolean>>;
    setUser: Dispatch<SetStateAction<UserProfile | undefined>>;
    /**
     * The set state action which regulates displaying the bridge widget
     */
    setShowBridgeWidget: Dispatch<SetStateAction<boolean>>;
    shadowDOMEnabled: boolean;
    showAuthFlow: boolean;
    showDynamicUserProfile: boolean;
    /**
     * The boolean value representing the state of displaying the bridge widget
     */
    showBridgeWidget: boolean;
    showLockedWalletView?: boolean;
    passkeySuccessPopup: PasskeySuccessEnum | undefined;
    showQrcodeModal: boolean;
    showWidgetStatePopup: boolean;
    signWithEmailWalletName?: string;
    siweStatement?: string;
    socialMediaIconUrl?: Record<string, string> | Record<SocialNetworkIconType, string>;
    socialMediaLinkText?: string;
    socialMediaUrl?: string;
    socialProvidersFilter?: SocialProviderFilter;
    termsOfServiceUrl?: string;
    theme?: ThemeData | ThemeSetting;
    toolkitEnabled?: boolean;
    user: UserProfile | undefined;
    disconnectWallet: (walletId: string) => void;
    walletConnector: WalletConnector | null;
    walletUiUtils: WalletUiUtils<WalletConnector>;
    walletConnectorOptions: WalletOption[];
    walletsFilter?: (options: WalletOption[]) => WalletOption[];
    recommendedWallets?: RecommendedWallet[];
    removeConnectedWalletsInfo: () => void;
    /** Whether any verifications are ongoing for the current user (ex. connect, sign and email login verifications
     * @deprecated Listen to our callbacks instead: https://docs.dynamic.xyz/react-sdk/callbacks/callbacks-introduction
     */
    isVerificationInProgress: boolean;
    /** State setter for isVerificationInProgress
     * @param checkWasSetOnDisable when true, if newValue is false, logs a message if the flag wasn't set to true before
     * @deprecated This will be dropped in v2
     */
    setIsVerificationInProgress: (newValue: boolean, checkWasSetOnDisable?: boolean) => void;
    /** Legacy boolean flag used in useVerifyOnAwaitingSignature. Used to be called "isVerifying".
     * Was meant to prevent an effect from accidentally triggering again when it shouldn't.
     * @deprecated Should be removed asap.
     */
    legacyIsVerifying: boolean;
    /** Legacy setter for legacyIsVerifying
     * @deprecated Should be removed asap.
     */
    setLegacyIsVerifying: Dispatch<SetStateAction<boolean>>;
    /** Whether there is an instance of DynamicEmbeddedAuthFlow being rendered */
    isRenderingEmbeddedAuthFlow: MutableRefObject<boolean>;
}
