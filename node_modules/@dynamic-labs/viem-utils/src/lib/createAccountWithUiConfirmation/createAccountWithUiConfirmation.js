import { __awaiter } from '../../../_virtual/_tslib.js';
import { toAccount } from 'viem/accounts';
import { ViemUiTransaction } from '../ViemUiTransaction/ViemUiTransaction.js';

const createAccountWithUiConfirmation = ({ address, account, provider, walletConnector, walletUiUtils, }) => toAccount({
    address,
    signMessage: (...args) => __awaiter(void 0, void 0, void 0, function* () {
        var _a;
        return walletUiUtils.signMessage({
            handler: () => __awaiter(void 0, void 0, void 0, function* () { return (yield account()).signMessage(...args); }),
            message: (_a = args[0]) === null || _a === void 0 ? void 0 : _a.message.toString(),
        });
    }),
    signTransaction: (...args) => __awaiter(void 0, void 0, void 0, function* () {
        const uiTransaction = new ViemUiTransaction({
            account: address,
            onSubmit: (transaction) => __awaiter(void 0, void 0, void 0, function* () { return (yield account()).signTransaction(transaction); }),
            publicClient: provider,
            transaction: args[0],
        });
        return walletUiUtils.sendTransaction(walletConnector, uiTransaction);
    }),
    signTypedData: (...args) => walletUiUtils.signMessage({
        handler: () => __awaiter(void 0, void 0, void 0, function* () { return (yield account()).signTypedData(...args); }),
        message: JSON.stringify(args[0]),
    }),
});

export { createAccountWithUiConfirmation };
